(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{607:function(t,s,a){"use strict";a.r(s);var n=a(5),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"源码分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#源码分析"}},[t._v("#")]),t._v(" 源码分析")]),t._v(" "),a("h2",{attrs:{id:"watcher"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#watcher"}},[t._v("#")]),t._v(" watcher")]),t._v(" "),a("p",[t._v("用于发射更新的行为\n依赖收集数据：告诉当前wathe什么属性被访问了\n在watcher计算的时候，79o")]),t._v(" "),a("p",[t._v("在vue中与一个构造函数Watcher；Watcher有多个方法；")]),t._v(" "),a("ul",[a("li",[t._v("get用来计算或执行处理函数")]),t._v(" "),a("li",[t._v("update公共的外部方法，改方法会触发内部的run方法")]),t._v(" "),a("li",[t._v("run，用来判断内部是使用异步还是同步运行等，这方法最终会调用内部get的方法")]),t._v(" "),a("li",[t._v("cleanDep，简单理解为清理队列")])]),t._v(" "),a("p",[t._v("页面渲染使用的是get方法；")]),t._v(" "),a("p",[t._v("页面变更diff是以组件为单位")]),t._v(" "),a("ul",[a("li",[t._v("如果页面中只有一个组件（vue 实例）不会有性能损失；")]),t._v(" "),a("li",[t._v("但是如果页面中有多个组件（多watch的一种情况），第一次会有多个组件的watch存入到全局watcher")]),t._v(" "),a("li",[t._v("当更新的时候只会更新其中的一个组件的watcher")]),t._v(" "),a("li",[t._v("将组件的watch存入全局容器watcher叫依赖收集")]),t._v(" "),a("li",[t._v("修改是，全局容器watcher总取出执行，叫派发更新")])]),t._v(" "),a("h2",{attrs:{id:"解释proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解释proxy"}},[t._v("#")]),t._v(" 解释proxy")]),t._v(" "),a("p",[t._v("访问app.xxx就是访问app._data.xxx")]),t._v(" "),a("h2",{attrs:{id:"发布订阅模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布订阅模式"}},[t._v("#")]),t._v(" 发布订阅模式")]),t._v(" "),a("p",[t._v("目标：解耦，让各个模块之间没有紧密的联系")]),t._v(" "),a("p",[t._v("现在在的处理方法是数据在更新的时候调用mountComponent\n在vue中整个的更新是按照组件为单位进行判断。已节点为单位进行更新；")]),t._v(" "),a("p",[t._v("负责的页面是有很多组件构成，更新的是现在全部的页面--》当前虚拟dom的页面dom")]),t._v(" "),a("p",[t._v("用代码的结构来描述：")]),t._v(" "),a("ol",[a("li",[t._v("老板提供一个账簿（数组）")]),t._v(" "),a("li",[t._v("我可以根据需求来订阅我的商品（老板要记录下来，谁定了什么东西，在数组中存储，某些东西）")]),t._v(" "),a("li",[t._v("等待可以做其他的事情")]),t._v(" "),a("li",[t._v("当货物拼来到的时候，老板就查看账簿，挨个打电话（遍历数组，取出数组的元素来使用）")])]),t._v(" "),a("p",[t._v("实际上就是事件模型")]),t._v(" "),a("ol",[a("li",[t._v("有一个event对象")]),t._v(" "),a("li",[t._v("on，off，emit方法")])]),t._v(" "),a("p",[t._v("实现事件模型，思考怎么用")]),t._v(" "),a("ol",[a("li",[t._v("event是一个全局对象")]),t._v(" "),a("li",[t._v("event.on（‘事件名’，处理函数），订阅事件")]),t._v(" "),a("li",[t._v("写别的代码")]),t._v(" "),a("li",[t._v("event.emit（‘事件名’，参数）先前注册处理的事件。。。")])]),t._v(" "),a("p",[t._v("我再写什么鬼，，，，，，有点明白。。。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" eventObjs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("handler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h2",{attrs:{id:"涉及的概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#涉及的概念"}},[t._v("#")]),t._v(" 涉及的概念")]),t._v(" "),a("ul",[a("li",[t._v("柯里化：一个函数原本有多个参数，传入一个参数，生成一个新函数，有新函数接受剩下的参数来运行得到的结构；")]),t._v(" "),a("li",[t._v("偏函数：一个函数有多个参数，传入一部分参数，生成一个新函数，由新函数接受剩下的参数来运行得到结构；")]),t._v(" "),a("li",[t._v("高级函数：一个函数，参数是一个函数；")])]),t._v(" "),a("p",[t._v("vue本质上是使用html字符串作为模板，将字符串的模板转化为AST，在转换为vnode 虚拟dom；")]),t._v(" "),a("ul",[a("li",[t._v("模板--》ast （抽象语法树）   字符串解析最消耗性能")]),t._v(" "),a("li",[t._v("ast--》vnode")]),t._v(" "),a("li",[t._v("vnode--》真实dom")])]),t._v(" "),a("h2",{attrs:{id:"vue如何区分html标签和自定义组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue如何区分html标签和自定义组件"}},[t._v("#")]),t._v(" vue如何区分html标签和自定义组件")]),t._v(" "),a("ul",[a("li",[t._v("vue源码已经把可以用的html标签存起来了")]),t._v(" "),a("li",[t._v("有一个函数判断标签是否为内置标签；A")])]),t._v(" "),a("h2",{attrs:{id:"数据驱动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据驱动"}},[t._v("#")]),t._v(" 数据驱动")]),t._v(" "),a("ul",[a("li",[t._v("1、获得模板，模板中有“{{}}”")]),t._v(" "),a("li",[t._v("2、利用vue构造函数中所提供的数据来“{{}}”，可以得到在页面中显示的标签")]),t._v(" "),a("li",[t._v("3、将标签替换页面中原来有“{{}}”的标签；")])]),t._v(" "),a("h2",{attrs:{id:"node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node"}},[t._v("#")]),t._v(" node")]),t._v(" "),a("h3",{attrs:{id:"node-nodetype节点类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node-nodetype节点类型"}},[t._v("#")]),t._v(" node.nodeType节点类型")]),t._v(" "),a("p",[t._v("常见有：document，text，attr")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" elementNodes"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("doucment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementByName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" attrNode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("elementNodes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttributeNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" textNode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("elementNodes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstChirld\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elementNodes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nodeType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("attrNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nodeType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("textNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nodeType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h2",{attrs:{id:"objec-defineproperties-obj-props"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#objec-defineproperties-obj-props"}},[t._v("#")]),t._v(" objec.defineProperties(obj,props)")]),t._v(" "),a("ul",[a("li",[t._v("obj:对象")]),t._v(" "),a("li",[t._v("props：可枚举的对象属性")])]),t._v(" "),a("h3",{attrs:{id:"obj-defineproperty-obj-props-desc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#obj-defineproperty-obj-props-desc"}},[t._v("#")]),t._v(" obj.defineProperty(obj,props,desc)")]),t._v(" "),a("p",[t._v("给对象添加属性")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" obj"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    firstName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    lastName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'B'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//给obj添加fullName属性")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 属性描述符：configurable，enumable，")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// writeable：是否可修改属性值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 访问描述符：get，set")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// get:回调函数，动态计算当前属性值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// set：回调函数，监视当前属性值的变化，更新器相关的属性值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\nobj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineProperty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fullName'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastName\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("val"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" names"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("names"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("names"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br")])]),a("h2",{attrs:{id:"object-keys-obj"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#object-keys-obj"}},[t._v("#")]),t._v(" object.keys(obj)")]),t._v(" "),a("p",[t._v("得到自身"),a("code",[t._v("可枚举")]),t._v("属性组成的数组；")]),t._v(" "),a("h2",{attrs:{id:"obj-hasownproperty-prop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#obj-hasownproperty-prop"}},[t._v("#")]),t._v(" obj.hasOwnProperty(prop)")]),t._v(" "),a("p",[t._v("判断prop是否obj自身属性；")]),t._v(" "),a("h2",{attrs:{id:"documentfragment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#documentfragment"}},[t._v("#")]),t._v(" documentFragment")]),t._v(" "),a("p",[t._v("文档碎片（高效批量更新多个节点）")]),t._v(" "),a("p",[t._v("document：对应显示的页面，一旦更新都出门条内部的某个元素界面更新")]),t._v(" "),a("p",[t._v("documentF让哥们他：内存中保存n个element的容器对象（不与界面关联），如果更新fragment中某个element，界面")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ul")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fragement_test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("test1"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("test2"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("test3"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ul")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fragment_test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1、创建fragment")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fragment"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createDocumentFragment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2、取出ul中所有子节点取出保存到fragment")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" child\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("child"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//一个节点只能有一个父亲")]),t._v("\n    fragment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("child"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//先将child从ul中移除，添加为fragment子节点")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3、更新fragment中所有li的文本")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fragment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("childNodes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("node")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nodeType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'haha'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4、将fragment插入ul")]),t._v("\nul"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fragment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])]),a("h2",{attrs:{id:"数据代理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据代理"}},[t._v("#")]),t._v(" 数据代理")]),t._v(" "),a("p",[t._v("通过一个对象代理对另一个对象中属性的操作（读/写）")]),t._v(" "),a("p",[t._v("实例化一个vue")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vm"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    el"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#app"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//等同于")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("h2",{attrs:{id:"debug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#debug"}},[t._v("#")]),t._v(" debug")]),t._v(" "),a("p",[t._v("打断点，逐句，进入方法，出去方法")]),t._v(" "),a("h2",{attrs:{id:"模板解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模板解析"}},[t._v("#")]),t._v(" 模板解析")]),t._v(" "),a("p",[t._v("js存在页面中以：指令、语句")]),t._v(" "),a("h2",{attrs:{id:"数据绑定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据绑定"}},[t._v("#")]),t._v(" 数据绑定")]),t._v(" "),a("h2",{attrs:{id:"引入dep对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引入dep对象"}},[t._v("#")]),t._v(" 引入Dep对象")]),t._v(" "),a("p",[t._v("该对象提供依赖收集(depend)的功能，和派发更新(notify)的功能\n在notify中去调用watcher的update方法")]),t._v(" "),a("h2",{attrs:{id:"watcher与dep"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#watcher与dep"}},[t._v("#")]),t._v(" watcher与Dep")]),t._v(" "),a("ul",[a("li",[t._v("vue项目中包含很多的组件，各个组件是自治的；")]),t._v(" "),a("li",[a("ul",[a("li",[t._v("那么watcher就可能会有多个，")])])]),t._v(" "),a("li",[a("ul",[a("li",[t._v("每一个watcher用于描述一个渲染行为或计算行为")])])]),t._v(" "),a("li",[a("ul",[a("li",[t._v("子组件发生数据的更新，页面需要从新渲染（真正的vue中是局部渲染）")])])])]),t._v(" "),a("p",[t._v("例如vue中推荐是使用计算属性，代替复杂的插值表达式")]),t._v(" "),a("ul",[a("li",[t._v("计算属性是会伴宿器使用的属性变化而变化的")]),t._v(" "),a("li",[t._v("name：()=>this.firstName+this.lastName;")]),t._v(" "),a("li",[t._v("计算属性依赖于属性firstName和lastName；")]),t._v(" "),a("li",[t._v("只要被依赖对的属性发生变化，那么就会促使就是那属性重新计算；")])]),t._v(" "),a("h2",{attrs:{id:"面试解释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#面试解释"}},[t._v("#")]),t._v(" 面试解释")]),t._v(" "),a("h3",{attrs:{id:"解释依赖收集的过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解释依赖收集的过程"}},[t._v("#")]),t._v(" 解释依赖收集的过程")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{name}}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{age}}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{addr}}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[t._v("1、第一次渲染的时候，三个组件的属性都会被访问到")]),t._v(" "),a("li",[t._v("2、只要访问了就会对其进行依赖收集：第一次收集：name,age,addr")]),t._v(" "),a("li",[t._v("3、假设修改了name，派发更新（修改了什么，就更新什么）")]),t._v(" "),a("li",[t._v("4、更新完成后页面需要局部刷新，只有name需要刷新；刷新了以后需要第二次收集：name")]),t._v(" "),a("li",[t._v("5、再次修改name，派发更新")]),t._v(" "),a("li",[t._v("6、更新完成后页面需要局部刷新，值刷新name；")]),t._v(" "),a("li",[t._v("7、如果我修改了father=12，页面不会渲染，因为它没有被依赖收集；")])]),t._v(" "),a("p",[t._v("所谓的依赖收集：就是告诉当前watcher什么属性被访问了。")]),t._v(" "),a("p",[t._v("###　如何将属性与当前watcher关联起来")]),t._v(" "),a("blockquote",[a("p",[t._v("watcher调用get方法的时候,将当前watcher放到全局,在get之前结束的时候(之后),将这个全局watcher移除")])]),t._v(" "),a("ul",[a("li",[t._v("在全局准备一个targerStack(watcher栈,简单的理解为watcher'数组',把一个操作中需要使用的watcher都存起来)")]),t._v(" "),a("li",[t._v("watcher调用get方法的时候,将当前watcher放到全局,在get之前结束的时候(之后),将这个全局watcher移除,提供pushTarget,popTarget;")]),t._v(" "),a("li",[t._v("在每个属性中都有dep对象;")])]),t._v(" "),a("p",[t._v("我们在访问对象属性的时候，我们的渲染watcher就在全局中；")]),t._v(" "),a("h2",{attrs:{id:"各个文件的作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#各个文件的作用"}},[t._v("#")]),t._v(" 各个文件的作用")]),t._v(" "),a("p",[t._v("1.compiler编译用的")]),t._v(" "),a("ul",[a("li",[t._v("vue使用字符串作为模板")]),t._v(" "),a("li",[t._v("在编译文件夹中存放对模板字符串的解析的算法，抽象语法树，优化等；")])]),t._v(" "),a("p",[t._v("2.core核心，vue构造函数，以及生命周期方法等部分")]),t._v(" "),a("p",[t._v("3.platform平台")]),t._v(" "),a("ul",[a("li",[t._v("针对运行的环境(设备),有不同的实现")]),t._v(" "),a("li",[t._v("也是vue的入口")])]),t._v(" "),a("p",[t._v("4.server服务端,主要是hi将vue服务端的处理代码")]),t._v(" "),a("p",[t._v("5.sfc,单文件组件")]),t._v(" "),a("p",[t._v("6.shared，公共工具，方法")])])}),[],!1,null,null,null);s.default=e.exports}}]);